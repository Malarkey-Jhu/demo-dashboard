"use strict";(self.webpackChunkalluxio_dashboard=self.webpackChunkalluxio_dashboard||[]).push([[763],{13404:function(oe,O,s){s.r(O),s.d(O,{default:function(){return ae}});var A=s(48305),y=s.n(A),M=s(90228),u=s.n(M),$=s(87999),m=s.n($),G=s(69601),l=s(17823),Z=s(19450),W=s(97630),N=s(94675),I=s(50159),K=s(83609),U=s(36735),x=s(50959),Q=s(26068),Y=s.n(Q),R=s(72518);function V(i,n){return S.apply(this,arguments)}function S(){return S=m()(u()().mark(function i(n,d){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,R.request)("/api/jobs",Y()({method:"GET",params:Y()({},n)},d||{})));case 1:case"end":return r.stop()}},i)})),S.apply(this,arguments)}function z(i){return T.apply(this,arguments)}function T(){return T=m()(u()().mark(function i(n){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,R.request)("/api/jobs/load",{method:"GET",params:n}));case 1:case"end":return t.stop()}},i)})),T.apply(this,arguments)}function H(i){return g.apply(this,arguments)}function g(){return g=m()(u()().mark(function i(n){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,R.request)("/api/jobs/free",{method:"GET",params:n}));case 1:case"end":return t.stop()}},i)})),g.apply(this,arguments)}function ue(i,n){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function i(n,d){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/rule",_objectSpread({data:n,method:"PUT"},d||{})));case 1:case"end":return r.stop()}},i)})),w.apply(this,arguments)}function ce(i,n){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function i(n,d){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/rule",_objectSpread({data:n,method:"POST"},d||{})));case 1:case"end":return r.stop()}},i)})),C.apply(this,arguments)}function pe(i,n){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function i(n,d){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/rule",_objectSpread({data:n,method:"DELETE"},d||{})));case 1:case"end":return r.stop()}},i)})),F.apply(this,arguments)}var X=s(17025),e=s(11527),q=function(n){var d=n.isModalOpen,t=n.handleOk,r=n.handleCancel,f=n.operation,o=n.currentRow,p=(0,G.dQ)(),a=p.token;return(0,e.jsx)(N.Z,{title:(0,e.jsxs)("div",{children:[(0,e.jsx)(X.Z,{style:{color:a.colorWarning}}),(0,e.jsx)("span",{style:{marginLeft:10},children:"Warning"})]}),open:d,onOk:t,onCancel:r,footer:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.ZP,{type:"primary",onClick:t,children:"OK"}),(0,e.jsx)(I.ZP,{onClick:r,children:"Cancel"})]}),children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:["Are you sure you want to ",f," the job"]}),(0,e.jsxs)("div",{children:[" ",o==null?void 0:o.id]})]})})},_=function(n){var d=n.isDrawerOpen,t=n.currentRow,r=n.handleClose,f=n.columns;return(0,e.jsxs)(K.Z,{width:600,open:d,onClose:r,closable:!1,children:[(t==null?void 0:t.id)&&(0,e.jsx)(l.vY,{column:2,title:t==null?void 0:t.id,request:m()(u()().mark(function o(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{data:t||{}});case 1:case"end":return a.stop()}},o)})),params:{id:t==null?void 0:t.id},columns:f.filter(function(o){return o.dataIndex!=="option"})}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),(t==null?void 0:t.type)==="LOAD"&&(0,e.jsxs)(l.vY,{column:2,title:"Load Job Detail",request:m()(u()().mark(function o(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z({id:t==null?void 0:t.id});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),params:{id:t==null?void 0:t.id},children:[(0,e.jsx)(l.vY.Item,{label:"Failed File List Path",dataIndex:"failedFileListPath"}),(0,e.jsx)(l.vY.Item,{label:"Path",dataIndex:"path"}),(0,e.jsx)(l.vY.Item,{label:"Index",dataIndex:"index"}),(0,e.jsx)(l.vY.Item,{label:"Skip If Exists",dataIndex:"skipIfExists",valueType:"text",render:function(p,a){return a!=null&&a.skipIfExists?"true":"false"}}),(0,e.jsx)(l.vY.Item,{label:"Load Metadata Only",dataIndex:"loadMetadataOnly",valueType:"text",render:function(p,a){return a!=null&&a.loadMetadataOnly?"true":"false"}}),(0,e.jsx)(l.vY.Item,{label:"Verify",dataIndex:"verify",valueType:"text",render:function(p,a){return a!=null&&a.verify?"true":"false"}}),(0,e.jsx)(l.vY.Item,{label:"Bandwidth",dataIndex:"bandwidth"}),(0,e.jsx)(l.vY.Item,{label:"Time Elapsed (ms)",dataIndex:"timeElapsedMilliseconds"}),(0,e.jsx)(l.vY.Item,{label:"Loaded Bytes",dataIndex:"loadedBytes"}),(0,e.jsx)(l.vY.Item,{label:"Skipped Bytes",dataIndex:"skippedBytes"}),(0,e.jsx)(l.vY.Item,{label:"Total Bytes",dataIndex:"totalBytes"}),(0,e.jsx)(l.vY.Item,{label:"Loaded Non-Empty Files",dataIndex:"loadedNonEmptyFiles"}),(0,e.jsx)(l.vY.Item,{label:"Failed Files",dataIndex:"failedFiles"}),(0,e.jsx)(l.vY.Item,{label:"Scanned Files",dataIndex:"scannedFiles"})]}),(t==null?void 0:t.type)==="FREE"&&(0,e.jsxs)(l.vY,{column:2,title:"Free Job Detail",request:m()(u()().mark(function o(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,H({id:t==null?void 0:t.id});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),params:{id:t==null?void 0:t.id},children:[(0,e.jsx)(l.vY.Item,{label:"Path",dataIndex:"path"}),(0,e.jsx)(l.vY.Item,{label:"Time Elapsed (ms)",dataIndex:"timeElapsedMilliseconds"}),(0,e.jsx)(l.vY.Item,{label:"Freed Bytes",dataIndex:"freedBytes"}),(0,e.jsx)(l.vY.Item,{label:"Failed Bytes",dataIndex:"failedBytes"}),(0,e.jsx)(l.vY.Item,{label:"Total Bytes",dataIndex:"totalBytes"}),(0,e.jsx)(l.vY.Item,{label:"Freed Files",dataIndex:"freedFiles"}),(0,e.jsx)(l.vY.Item,{label:"Failed Files",dataIndex:"failedFiles"}),(0,e.jsx)(l.vY.Item,{label:"Total Files",dataIndex:"totalFiles"})]})]})},ee=function(){var n=(0,x.useState)(!1),d=y()(n,2),t=d[0],r=d[1],f=(0,x.useRef)(),o=(0,x.useState)(),p=y()(o,2),a=p[0],j=p[1],ne=(0,x.useState)([]),D=y()(ne,2),b=D[0],re=D[1],le=(0,x.useState)(""),k=y()(le,2),L=k[0],E=k[1],se=L!=="",P=function(h,c){E(h),j(c)},ie=function(){j(void 0),E("")},de=function(){j(void 0),E("")},B=[{title:"Job ID",dataIndex:"id",render:function(h,c){return(0,e.jsx)("a",{onClick:function(){j(c),r(!0)},children:h})}},{title:"Type",dataIndex:"type",renderText:function(h){return h},valueEnum:{LOAD:{text:"LOAD "},FREE:{text:"FREE"},COPY:{text:"COPY"}}},{title:"State",dataIndex:"state",hideInForm:!0,valueEnum:{IN_PROGRESS:{text:"Processing",status:"Processing"},SUCCEEDED:{text:"Done",status:"Success"},FAILED:{text:"Error",status:"Error"}}},{title:"Start Time",sorter:!0,dataIndex:"startTime",valueType:"dateTime"},{title:"Operation",dataIndex:"option",valueType:"option",render:function(h,c){return(0,e.jsxs)(U.Z,{children:[(0,e.jsx)("a",{onClick:function(){return P("RESTART",c)},children:"Restart"}),c.state!=="FAILED"&&(0,e.jsx)("a",{onClick:function(){return P("STOP",c)},children:"Stop"})]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Z.Z,{headerTitle:"Jobs List",actionRef:f,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[]},form:{layout:"vertical",labelCol:{span:12},wrapperCol:{span:24}},request:V,columns:B,rowSelection:{onChange:function(h,c){re(c)}}}),(b==null?void 0:b.length)>0&&(0,e.jsxs)(W.S,{extra:(0,e.jsxs)("div",{children:["Selected"," ",(0,e.jsx)("a",{style:{fontWeight:600},children:b.length})," ","Items"]}),children:[(0,e.jsx)(I.ZP,{type:"primary",onClick:m()(u()().mark(function v(){return u()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:case"end":return c.stop()}},v)})),children:"Stop"}),(0,e.jsx)(I.ZP,{type:"primary",children:"Restart"})]}),(0,e.jsx)(_,{isDrawerOpen:t,currentRow:a,handleClose:function(){j(void 0),r(!1)},columns:B}),(0,e.jsx)(q,{isModalOpen:se,handleOk:ie,handleCancel:de,operation:L,currentRow:a})]})},te=function(){return(0,e.jsx)(ee,{})},ae=te}}]);
